From ceb5da75cb69ef000581e13b93027f8a8b2fcffe Mon Sep 17 00:00:00 2001
From: X512 <danger_mail@list.ru>
Date: Sun, 6 Jun 2021 22:59:07 +0900
Subject: kernel/arch/system_info: implement for riscv64

Change-Id: Ifa66859a7f87cd821fe50ca7d26e08472adcf279
---
 .../kernel/arch/riscv64/arch_system_info.cpp  | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

diff --git a/src/system/kernel/arch/riscv64/arch_system_info.cpp b/src/system/kernel/arch/riscv64/arch_system_info.cpp
index 6fb0f54290..86fbc293b2 100644
--- a/src/system/kernel/arch/riscv64/arch_system_info.cpp
+++ b/src/system/kernel/arch/riscv64/arch_system_info.cpp
@@ -24,12 +24,31 @@ static uint16 sCPURevision;
 void
 arch_fill_topology_node(cpu_topology_node_info* node, int32 cpu)
 {
+	switch (node->type) {
+		case B_TOPOLOGY_ROOT:
+			node->data.root.platform = B_CPU_RISC_V;
+			break;
+
+		case B_TOPOLOGY_PACKAGE:
+			node->data.package.vendor = B_CPU_VENDOR_UNKNOWN;
+			node->data.package.cache_line_size = CACHE_LINE_SIZE;
+			break;
+
+		case B_TOPOLOGY_CORE:
+			node->data.core.model = 0;
+			node->data.core.default_frequency = sCPUClockFrequency;
+			break;
+
+		default:
+			break;
+	}
 }
 
 
 status_t
 arch_system_info_init(struct kernel_args *args)
 {
+	sCPUClockFrequency = 1000000000;
 	return B_OK;
 }
 
-- 
2.30.2

