From a895c66740b9f718c155fd57872f890c557b04f1 Mon Sep 17 00:00:00 2001
From: X512 <danger_mail@list.ru>
Date: Mon, 26 Jul 2021 03:25:27 +0900
Subject: kernel/arch/timer: implement for riscv64 (3)

Change-Id: I71fec4dc335ce405a4a5182ce066e0631636c63a
---
 headers/private/system/arch/riscv64/arch_real_time_data.h | 3 +--
 src/system/kernel/lib/arch/riscv64/Jamfile                | 1 +
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/headers/private/system/arch/riscv64/arch_real_time_data.h b/headers/private/system/arch/riscv64/arch_real_time_data.h
index 4d63960eed..2cc01f92ff 100644
--- a/headers/private/system/arch/riscv64/arch_real_time_data.h
+++ b/headers/private/system/arch/riscv64/arch_real_time_data.h
@@ -13,8 +13,7 @@
 
 struct arch_real_time_data {
 	bigtime_t	system_time_offset;
-	uint32		system_time_conversion_factor;
-	uint32		_padding;
+	uint64		system_time_conversion_factor;
 };
 
 #endif	/* _KERNEL_ARCH_REAL_TIME_DATA_H */
diff --git a/src/system/kernel/lib/arch/riscv64/Jamfile b/src/system/kernel/lib/arch/riscv64/Jamfile
index 7b143796e6..603763cf5d 100644
--- a/src/system/kernel/lib/arch/riscv64/Jamfile
+++ b/src/system/kernel/lib/arch/riscv64/Jamfile
@@ -10,6 +10,7 @@ SEARCH_SOURCE += [ FDirName $(librootSources) os arch generic ] ;
 
 KernelMergeObject kernel_os_arch_$(TARGET_ARCH).o :
 	byteorder.S
+	system_time.cpp
 
 	generic_atomic.cpp
 	generic_system_time_nsecs.cpp
-- 
2.30.2

